---
layout: post
title: 谈面向对象思想和函数式的问题
author: zhangyue
---

## 面向对象的本质
在面向过程编程思想中，程序主要由“数据结构”和用来进行数据变换操作的“函数”组成。这是一种很自然的模型。

面向对象并没有颠覆这种模型，它的主要的改进是为数据结构增加了一个抽象层。这种有抽象层的数据结构被叫做“ADT”或“对象”。 这个层可以干很多事情，比如可以解耦与数据消费者之间的关系，也可以将数据的访问和实现分离，使它们可以独自变化。实现这种抽象层的代码块被叫做“方法”。 但事实上使用这种抽象层的机会并不多。其它时候，你其实只是想表达数据之间的变换操作，这些依然应该用普通的函数表达，这样做更加简单和直接。

## 藐视函数
对象的滥用始于“一切皆是对象”的想法，这思想认为所有数据结构都应该有这个抽象层， 且函数不是一等公民，函数的存在必须依附于某个叫对象的数据结构才行。这样极端的设计用起来导致了一些麻烦，最常见的问题是，很多人因此不再明白函数应该放在哪？

起初人们选择将函数放在其主要操作的数据结构（对象）中。但如果一个函数不操作任何已有的对象呢？ 于是人们纷纷创建一种叫Utils的对象，这对象没任何数据结构的样子，仅仅是为了放函数。

再后来，那些放在对象中的函数也出现了问题，很多人将方法和函数混淆了，因为它们经常放在同一个对象里，而不是所有人都深刻理解方法和函数的区别。为此还产生了论战，甚至诞生了一些方法论和指导原则一类的东西。

最后，Service Layer的提出才算是基本给函数在OO世界中找到了一个地方，这就是大家经常能见到的 XXXService YYYService。

## 藐视数据结构
而函数式编程的思潮又走向了另一个极端。 这类思想有点偏向于“一切都是函数”的意思。他们认为函数是最主要的，数据不过是一种临时的状态，被称为“副作用”。这种不重视数据结构的做法，导致了它在处理很常见的需求时，非常的蹩脚。

## Java 8
从Java 8 开始，Java终于将函数重新提升为一等公民。 函数有了自己应有的地位。但是由于“一切皆是对象”的Flag不容质疑。所以实现起来依然要使用一些奇怪的对象。 但是起码，Java语言的思路已经很成熟，它没有极端偏向数据结构或函数。虽不优雅，但还算目前比较靠谱的语言。
